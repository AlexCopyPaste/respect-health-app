<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Respect Your Health</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#f2f2f7">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

    <div class="app-container">
        
        <div id="mainMenu" class="screen active">
            <header class="main-header">
                <div class="header-content">
                    <h1>Respect Your Health</h1>
                    <p>הבריאות שלך בידיים שלך</p>
                </div>
                <div class="header-logo-left">⚕️</div>
            </header>

            <div class="dashboard-grid">
                <div class="app-btn" onclick="showSection('bpSection')">
                    <div class="icon-huge">🩺</div>
                    <span>לחץ דם</span>
                </div>
                
                <div class="app-btn" onclick="showSection('sugarSection')">
                    <div class="icon-huge">🩸</div>
                    <span>סוכר</span>
                </div>

                <div class="app-btn" onclick="showSection('weightSection')">
                    <div class="icon-huge">📟</div>
                    <span>משקל</span>
                </div>

                <div class="app-btn" onclick="showSection('medsSection')">
                    <div class="icon-huge">💊</div>
                    <span>תרופות</span>
                </div>

                <div class="app-btn" onclick="showSection('cycleSection')">
                    <div class="icon-huge">🥀</div>
                    <span>מחזור</span>
                </div>

                <div class="app-btn" onclick="showSection('dietSection')">
                    <div class="icon-huge">🍽️</div>
                    <span>דיאטה</span>
                </div>

                <div class="app-btn" onclick="showSection('walkingSection')">
                    <div class="icon-huge">🚶</div>
                    <span>הליכה</span>
                </div>

                <div class="app-btn" onclick="showSection('settingsSection')">
                    <div class="icon-huge">⚙️</div>
                    <span>הגדרות</span>
                </div>
            </div>
        </div>

        <div id="bpSection" class="screen hidden" data-category="bp">
            <div class="screen-header">
                <div class="header-title"><span>🩺</span><h2>לחץ דם</h2></div>
                <button onclick="showHome()" class="home-btn">🏠</button>
            </div>
            
            <div class="color-legend">
                <span class="legend-item"><span class="dot bg-normal"></span>תקין</span>
                <span class="legend-item"><span class="dot bg-borderline"></span>גבולי</span>
                <span class="legend-item"><span class="dot bg-danger-high"></span>גבוה</span>
            </div>

            <div class="content-scroll">
                <div class="card form-card">
                    <form id="bpForm">
                        <div class="form-group">
                            <label>תאריך:</label>
                            <input type="datetime-local" id="bpDate" required>
                        </div>
                        <div class="row">
                            <div class="form-group">
                                <label>סיסטולי (גבוה):</label>
                                <input type="tel" inputmode="numeric" id="systolic" oninput="validateField(this, 'systolic')" required placeholder="120">
                            </div>
                            <div class="form-group">
                                <label>דיאסטולי (נמוך):</label>
                                <input type="tel" inputmode="numeric" id="diastolic" oninput="validateField(this, 'diastolic')" required placeholder="80">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>דופק:</label>
                            <input type="tel" inputmode="numeric" id="pulse" oninput="validateField(this, 'pulse')" required placeholder="70">
                        </div>
                        <button type="submit" class="btn-ios">שמור</button>
                    </form>
                </div>
                <div class="chart-container"><canvas id="bpChart"></canvas></div>
                <div id="bpList" class="history-list"></div>
            </div>
        </div>

        <div id="sugarSection" class="screen hidden" data-category="sugar">
            <div class="screen-header">
                <div class="header-title"><span>🩸</span><h2>סוכר</h2></div>
                <button onclick="showHome()" class="home-btn">🏠</button>
            </div>

            <div class="color-legend">
                <span class="legend-item"><span class="dot bg-normal"></span>תקין</span>
                <span class="legend-item"><span class="dot bg-borderline"></span>גבולי</span>
                <span class="legend-item"><span class="dot bg-danger-high"></span>חריג</span>
            </div>

            <div class="content-scroll">
                <div class="card form-card">
                    <form id="sugarForm">
                        <div class="form-group">
                            <label>תאריך:</label>
                            <input type="datetime-local" id="sugarDate" required>
                        </div>
                        <div class="form-group">
                            <label>מצב בדיקה:</label>
                            <select id="sugarTime" class="ios-select" onchange="revalidateSugar()">
                                <option value="fasting">בצום (מומלץ)</option>
                                <option value="after_food">שעתיים אחרי אוכל</option>
                                <option value="before_food">לפני ארוחה</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>רמת סוכר (mg/dL):</label>
                            <input type="tel" inputmode="numeric" id="glucoseLevel" oninput="validateField(this, 'sugar')" required placeholder="100">
                        </div>
                        <button type="submit" class="btn-ios">שמור</button>
                    </form>
                </div>
                <div class="chart-container"><canvas id="sugarChart"></canvas></div>
                <div id="sugarList" class="history-list"></div>
            </div>
        </div>

        <div id="weightSection" class="screen hidden" data-category="weight">
            <div class="screen-header">
                <div class="header-title"><span>📟</span><h2>משקל</h2></div>
                <button onclick="showHome()" class="home-btn">🏠</button>
            </div>
            <div class="content-scroll">
                <div class="card form-card">
                    <form id="weightForm">
                        <div class="form-group">
                            <label>תאריך:</label>
                            <input type="datetime-local" id="weightDate" required>
                        </div>
                        <div class="form-group">
                            <label>משקל (ק"ג):</label>
                            <input type="tel" inputmode="decimal" id="weightVal" oninput="validateField(this, 'weight')" required placeholder="0.0">
                        </div>
                        <button type="submit" class="btn-ios">שמור</button>
                    </form>
                </div>
                <div class="chart-container"><canvas id="weightChart"></canvas></div>
                <div id="weightList" class="history-list"></div>
            </div>
        </div>

        <div id="dietSection" class="screen hidden" data-category="diet">
            <div class="screen-header">
                <div class="header-title"><span>🍽️</span><h2>דיאטה</h2></div>
                <button onclick="showHome()" class="home-btn">🏠</button>
            </div>
            <div class="content-scroll">
                <div class="card form-card">
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
                        <h3>יומן קלוריות</h3>
                        <button type="button" class="info-btn" onclick="alert('המלצה כללית:\nגברים: 2000-2500\nנשים: 1600-2000')">ℹ️</button>
                    </div>
                    <form id="dietForm">
                        <div class="form-group">
                            <label>תאריך:</label>
                            <input type="datetime-local" id="dietDate" required>
                        </div>
                        <div class="form-group">
                            <label>יעד יומי:</label>
                            <input type="tel" id="calorieTarget" placeholder="1800">
                        </div>
                        <div class="row">
                            <div class="form-group">
                                <label>בוקר:</label>
                                <input type="tel" id="calBreakfast" placeholder="0">
                            </div>
                            <div class="form-group">
                                <label>צהריים:</label>
                                <input type="tel" id="calLunch" placeholder="0">
                            </div>
                            <div class="form-group">
                                <label>ערב:</label>
                                <input type="tel" id="calDinner" placeholder="0">
                            </div>
                        </div>
                        <button type="submit" class="btn-ios">שמור</button>
                    </form>
                </div>
                <div id="dietList" class="history-list"></div>
            </div>
        </div>

        <div id="walkingSection" class="screen hidden" data-category="walking">
            <div class="screen-header">
                <div class="header-title"><span>🚶</span><h2>הליכה</h2></div>
                <button onclick="showHome()" class="home-btn">🏠</button>
            </div>
            <div class="content-scroll">
                <div class="card form-card">
                    <form id="walkingForm">
                        <div class="form-group">
                            <label>תאריך:</label>
                            <input type="datetime-local" id="walkingDate" required>
                        </div>
                        <div class="row">
                            <div class="form-group">
                                <label>התחלה:</label>
                                <input type="time" id="walkStart" required>
                            </div>
                            <div class="form-group">
                                <label>סיום:</label>
                                <input type="time" id="walkEnd" required>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group">
                                <label>קושי:</label>
                                <select id="walkDifficulty" class="ios-select">
                                    <option value="קל">קל</option>
                                    <option value="רגיל">רגיל</option>
                                    <option value="שיפוע">שיפוע</option>
                                    <option value="אתגרי">אתגרי</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>מהירות:</label>
                                <select id="walkSpeed" class="ios-select">
                                    <option value="רגילה">רגילה</option>
                                    <option value="מהירה">מהירה</option>
                                    <option value="ריצה">ריצה</option>
                                </select>
                            </div>
                        </div>
                        <button type="submit" class="btn-ios">שמור</button>
                    </form>
                </div>
                <div id="walkingList" class="history-list"></div>
            </div>
        </div>

        <div id="medsSection" class="screen hidden" data-category="meds">
            <div class="screen-header">
                <div class="header-title"><span>💊</span><h2>תרופות</h2></div>
                <button onclick="showHome()" class="home-btn">🏠</button>
            </div>
            <div class="content-scroll">
                <div class="card form-card">
                    <form id="medsForm">
                        <div class="form-group"><label>שם התרופה:</label><input type="text" id="medName" required placeholder="שם התרופה"></div>
                        <div class="form-group"><label>זמנים:</label>
                            <div class="checkbox-group">
                                <label><input type="checkbox" value="בוקר" class="med-time"> בוקר</label>
                                <label><input type="checkbox" value="צהריים" class="med-time"> צהריים</label>
                                <label><input type="checkbox" value="ערב" class="med-time"> ערב</label>
                            </div>
                        </div>
                        <button type="submit" class="btn-ios">הוסף</button>
                    </form>
                </div>
                <div id="medsList" class="history-list"></div>
            </div>
        </div>

        <div id="cycleSection" class="screen hidden" data-category="cycle">
            <div class="screen-header">
                <div class="header-title"><span>🥀</span><h2>מחזור</h2></div>
                <button onclick="showHome()" class="home-btn">🏠</button>
            </div>
            <div class="content-scroll">
                <div class="card form-card">
                    <form id="cycleForm">
                        <div class="form-group"><label>תאריך התחלה:</label><input type="date" id="cycleStart" required></div>
                        <div class="form-group"><label>הערות:</label><input type="text" id="cycleNotes" placeholder="כאב, תחושה..."></div>
                        <button type="submit" class="btn-ios">שמור</button>
                    </form>
                </div>
                <div id="cycleList" class="history-list"></div>
            </div>
        </div>

        <div id="settingsSection" class="screen hidden">
            <div class="screen-header">
                <div class="header-title"><span>⚙️</span><h2>הגדרות</h2></div>
                <button onclick="showHome()" class="home-btn">🏠</button>
            </div>
            <div class="content-scroll">
                <div class="settings-group">
                    <div class="settings-item">
                        <span>גודל גופן גדול</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="largeFontToggle">
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="settings-item">
                        <span>מצב לילה</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="themeSwitch">
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="settings-item">
                        <span>היסטוריה (חודש אחרון)</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="historyLimitToggle">
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="settings-item">
                        <span>הצג ייצוא Excel</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="exportToggle">
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="settings-item clickable" onclick="resetData()">
                        <span style="color:red">מחיקת נתונים</span>
                        <span>🗑️</span>
                    </div>
                </div>
            </div>
        </div>

        <button id="exportCsvBtn" class="floating-export-btn hidden" onclick="exportCurrentData()">📤 Excel</button>

        <div id="customConfirm" class="modal-overlay hidden">
            <div class="modal-box">
                <h3>מחיקה</h3>
                <p>למחוק את הרשומה?</p>
                <div class="modal-actions">
                    <button class="modal-btn cancel" onclick="closeConfirm(false)">ביטול</button>
                    <button class="modal-btn delete" onclick="closeConfirm(true)">מחק</button>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>